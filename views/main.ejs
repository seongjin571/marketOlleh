<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Page Title</title>
    <meta name="viewport" content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0'>
    <link rel="stylesheet" type="text/css" media="screen" href="/stylesheets/main.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.3.3/css/swiper.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script type='application/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.js'></script>
<!--     <script>
        window.addEventListener('load', function () {
            FastClick.attach(document.body);
        }, false);
    </script> -->
</head>

<body>
    <div id="text_logo">
        <img src="/images/text.png" width="50%" height="auto">
    </div>

    <!-- Searching Seaction - Hyeon Woo -->

    <div id="Searching">
        <div id="verti">
            <div id="vertical_helper">
                <select name="filed">
                    <option value="name" selected="selected">시장이름</option>
                    <option value="gooname">구</option>
                    <option value="dongname">동</option>
                    <option value="newaddress">도로명</option>
                    <option value="oldaddress">지번</option>
                </select>
                <input type="text" placeholder="searching" id="search_value">
                <!-- <input type="button" value="검색" id="searchingButton"> -->
                <img src="/images/search.png" value="검색" id="searchingButton" width="10%" height="30px">
            </div>
        </div>
    </div>

    <div>
        <input type="button" value="구 선택" id="tableControl">
        <input type="button" value="지도로 찾기" id="navControlButton">
    </div>

    <article>
        <ol id="search_result">
        </ol>
    </article>

    <div id="Goomap">
        <table>
            <tr>
                <td>노원구</td>
                <td>성동구</td>
                <td>은평구</td>
                <td>양천구</td>
                <td>강북구</td>                
            </tr>
            <tr>
                <td>동대문구</td>
                <td>도봉구</td>
                <td>송파구</td>
                <td>성북구</td>
                <td>관악구</td>
            </tr>
            <tr>
                <td>금천구</td>
                <td>서대문구</td>
                <td>강동구</td>
                <td>종로구</td>
                <td>영등포구</td>

            </tr>
            <tr>
                <td>동작구</td>
                <td>강남구</td>
                <td>마포구</td>
                <td>중구</td>
                <td>서초구</td>
            </tr>
            <tr>
                <td>강서구</td>
                <td>광진구</td>
                <td>구로구</td>
                <td>중랑구</td>
                <td>용산구</td>
            </tr>
        </table>
    </div>

    <div id="NewGoomap"></div>    
    <!-- Searching Seaction - Hyeon Woo -->

    <!-------------------- KAKAO MAP API ---------------------->
    <div id="KakaoMap">
        <div id="map" style="width:100%;height:350px;"></div>
        <p>
            <button onclick="hideMarkers()">마커 감추기</button>
            <button onclick="showMarkers()">마커 보이기</button>
        </p> 
        <em>클릭한 위치에 마커가 표시됩니다!</em>
        <div id="clickLatlng"></div><br>

        <div><!-- map center 위도 경도 좌표 바꾸기 -->
            <input type="text" id="Umaplat" placeholder="위도">
            <input type="text" id="Umaplng" placeholder="경도">
            <input type="submit" value="Click" id="ChangeLatLng" onclick="changeCenter()">
        </div>
    </div>

    <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=1f14a7f1512988347e7ffdd75ac7ab4c"></script>
    <!-------------------- KAKAO MAP API ---------------------->
    <div id="aaa">
        <div id="myStamp">
            <div class="swiper-container">
                <div class="swiper-wrapper">
                    <!-- <label>내 스탬프</label> -->
                    <% if(myStamps) { %>
                        <% for(var i=0; i<myStamps.length; i++) { %>
                            <div class="swiper-slide">
                                <div class="stamp_name">
                                    <div style="width: 70%">
                                        <%= myStamps[i].market_name %>
                                    </div>
                                    <div style="width: 30%" class="market_name">
                                        <%= myStamps[i].sijang_name %>
                                    </div>
                                </div>
                                <div class="stamp_count">
                                    <div class="stamp_count_vertical">
                                        <p>
                                            <%= myStamps[i].stamp_count %>/
                                                <%= myStamps[i].stamp_standard %>
                                        </p>
                                    </div>
                                </div>
                            </div>
                            <% } %>
                                <% } else { %>
                                    <div class='stamp_list'>
                                        <div id="no_stamp">발급받은 쿠폰이 없습니다.</div>
                                    </div>
                                    <% } %>
                </div>
                <div class="swiper-pagination"></div>
            </div>
        </div>

        <div id="near_market">
            <!-- <label>내 스탬프</label> -->
            <div id="user_name">
                <%= user.username %>님 근처 시장
            </div>
            <div id="market_pic">
                <img src="/images/market.png" width="100%" height="100%">
            </div>
            <div id="near_infor">
                <div style="width: 50%">통인 시장</div>
                <div style="width: 50%">3.2km</div>
            </div>
        </div>

        <div id="hot_store">
            <label>서울시 인기 상점</label>
            <div class="hot_store_list">
                <div class="hot_store_detail">
                    <div>좋아요: 212</div>
                    <div>
                        <img src="/images/fruit.jpg" width="100%">
                    </div>
                    <div class="detail_name">
                        통인시장
                        <br>김가네 과일가게
                    </div>
                </div>
                <div class="hot_store_detail"></div>
            </div>
            <div class="hot_store_list">
                <div class="hot_store_detail"></div>
                <div class="hot_store_detail"></div>
            </div>
            <div class="hot_store_list">
                <div class="hot_store_detail"></div>
                <div class="hot_store_detail"></div>
            </div>
            <div class="hot_store_list">
                <div class="hot_store_detail"></div>
                <div class="hot_store_detail"></div>
            </div>
            <div class="hot_store_list">
                <div class="hot_store_detail"></div>
                <div class="hot_store_detail"></div>
            </div>
            <div class="hot_store_list">
                <div class="hot_store_detail"></div>
                <div class="hot_store_detail"></div>
            </div>
            <div class="hot_store_list">
                <div class="hot_store_detail"></div>
                <div class="hot_store_detail"></div>
            </div>
            <div class="hot_store_list">
                <div class="hot_store_detail"></div>
                <div class="hot_store_detail"></div>
            </div>
            <div class="hot_store_list">
                <div class="hot_store_detail"></div>
                <div class="hot_store_detail"></div>
            </div>
            <div class="hot_store_list">
                <div class="hot_store_detail"></div>
                <div class="hot_store_detail"></div>
            </div>
        </div>
    </div>

    <div id="nav_sj">
        <div id="home_sj">
            <img src="/images/home.png" width="60%">
            <br/>홈</div>
        <div id="coupon_sj">
            <img src="/images/coupon.png" width="60%">
            <br/>쿠폰</div>
        <div id="location_sj">
            <img src="/images/location.png" width="60%">
            <br/>주변 가맹점</div>
        <div id="myStamp_sj">
            <img src="/images/stamp.png" width="60%">
            <br/>내 스탬프</div>
        <div id="my_sj">
            <img src="/images/my.png" width="60%">
            <br/>MyPage</div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.3.3/js/swiper.min.js"></script>
    <script> 
        $('#myStamp_sj').click(function () {
            location.href = "/myStamp";
        })
        $('#coupon_sj').click(function () {
            location.href = "/coupon";
        })
        var swiper = new Swiper('.swiper-container', {
            pagination: {
                el: '.swiper-pagination',
                dynamicBullets: true,
            },
        });
    </script>

    <script type="text/javascript">
        // 지도를 표시할 div (id)
        var mapContainer = document.getElementById('map'), 
            mapOption = { 
                center: new daum.maps.LatLng(33.450701, 126.570667), // 지도의 중심좌표
                level: 4 // 지도의 확대 레벨
            };

        var map = new daum.maps.Map(mapContainer, mapOption); // 지도를 생성합니다

        // 지도를 클릭했을때 클릭한 위치에 마커를 추가하도록 지도에 클릭이벤트를 등록합니다
        daum.maps.event.addListener(map, 'click', function(mouseEvent) {
            var latlng = mouseEvent.latLng; 
            // 클릭한 위치에 마커를 표시합니다 
            addMarker(latlng);

            var message = '클릭한 위치의 위도는 ' + latlng.getLat() + ' 이고,  '+'경도는 ' + latlng.getLng() + ' 입니다';
            var resultDiv = document.getElementById('clickLatlng');
            resultDiv.innerHTML = message;       
        }); // PS. latLng를 DB로부터 받아서 for문과 DB 데이터 교환을 통해 addMarker 함수 호출해서 모든 시장의 마크 찍을 수 있을 듯

        // 지도에 표시된 마커 객체를 가지고 있을 배열입니다
        var markers = [];

        // 마커 하나를 지도위에 표시합니다 
        addMarker(new daum.maps.LatLng(33.450701, 126.570667));

        // 마커를 생성하고 지도위에 표시하는 함수입니다
        function addMarker(position) {
            
            // 마커를 생성합니다
            var marker = new daum.maps.Marker({
                position: position
            });

            // 마커가 지도 위에 표시되도록 설정합니다
            marker.setMap(map);

            // 생성된 마커를 배열에 추가합니다
            markers.push(marker);
        }

        // 배열에 추가된 마커들을 지도에 표시하거나 삭제하는 함수입니다
        function setMarkers(map) {
            for (var i = 0; i < markers.length; i++) {
                markers[i].setMap(map);
            }            
        }

        // "마커 보이기" 버튼을 클릭하면 호출되어 배열에 추가된 마커를 지도에 표시하는 함수입니다
        function showMarkers() {
            setMarkers(map)    
        }

        // "마커 감추기" 버튼을 클릭하면 호출되어 배열에 추가된 마커를 지도에서 삭제하는 함수입니다
        function hideMarkers() {
            setMarkers(null);    
        }

        function relayout() {    
            
            // 지도를 표시하는 div 크기를 변경한 이후 지도가 정상적으로 표출되지 않을 수도 있습니다
            // 크기를 변경한 이후에는 반드시  map.relayout 함수를 호출해야 합니다 
            // window의 resize 이벤트에 의한 크기변경은 map.relayout 함수가 자동으로 호출됩니다
            map.relayout();
        }                

        function changeCenter(){
            var moveLatLon = new daum.maps.LatLng(Umaplat.value, Umaplng.value);

            // 지도 중심을 이동 시킵니다
            map.setCenter(moveLatLon);
            map.setLevel(2);
            relayout();
        }

        function changeCenter(mapLat, mapLng){
            var moveLatLon = new daum.maps.LatLng(mapLat, mapLng);

            // 지도 중심을 이동 시킵니다
            map.setCenter(moveLatLon);
            map.setLevel(2);
            relayout();
        }


    </script>
    <script type='text/javascript' src='javascripts/searching.js'></script>
</body>

</html>